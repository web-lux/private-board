<% 
// initialize values as null to avoid referenceError
let firstName, lastName, username = null;
if (typeof user !== 'undefined') {
    firstName = user.firstName;
    lastName = user.lastName;
    username = user.username;
} %>

<%-  include("./partials/head.ejs") %>

<body>
    <%-  include("./partials/header.ejs") %>
    <main>
        <h1>Sign Up</h1>
        <form action="/sign-up" method="POST">
            <fieldset>
                <label for="firstName">First Name</label> 
                <input type="text" name="firstName" id="firstName" value="<%= firstName %>"> 

                <label for="lastName">Last Name</label>
                <input type="text" name="lastName" id="lastName" value="<%= lastName %>" required>
            </fieldset>

            <label for="username">Username</label>
            <input type="email" name="username" id="username" required placeholder="your_email@gmail.com" value="<%= username %>">

            <fieldset>
                <label for="password">Password</label>
                <input type="password" name="password" id="password" required>
                <label for="passwordVerification">Please type password again</label>
                <input type="password" name="passwordVerification" id="passwordVerification" required>
            </fieldset>

            <button type="submit">Create Account</button>
        </form>

        <% if (typeof errors !== 'undefined') { %>
            <%# "typeof" check instead of more common "if (errors)" to avoid ReferenceError %>
            <ul>
                <% errors.forEach(error => { %>
                    <li><%= error.msg %></li>
                <% }) %>
            </ul>
        <% } %>

    </main>
</body>